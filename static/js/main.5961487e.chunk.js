(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(46)},32:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){e.exports=a.p+"static/media/merlin.d9a34f22.jpg"},38:function(e,t,a){e.exports=a.p+"static/media/percival.9987db5b.jpg"},39:function(e,t,a){e.exports=a.p+"static/media/servant.73d1b559.jpg"},40:function(e,t,a){e.exports=a.p+"static/media/assassin.e7fdef50.jpg"},41:function(e,t,a){e.exports=a.p+"static/media/mordred.017624c8.jpg"},42:function(e,t,a){e.exports=a.p+"static/media/morgana.cbfd7398.jpg"},43:function(e,t,a){e.exports=a.p+"static/media/minion.d8ec044c.jpg"},44:function(e,t,a){e.exports=a.p+"static/media/oberon.3b87a760.jpg"},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(12),c=a.n(s),i=a(2),o=a(10),l=a(11),p=a(1),u={increment:"CHARACTER_INCREMENT",decrement:"CHARACTER_DECREMENT",reset:"CHARACTER_RESET",shuffle:"CHARACTER_SHUFFLE"};function m(e){var t,a,r;for(r=e.length-1;r>0;r--)t=Math.floor(Math.random()*(r+1)),a=e[r],e[r]=e[t],e[t]=a;return e}var d={characterList:{merlin:{maxCount:1,count:1,order:0},percival:{maxCount:1,count:1,order:1},servant:{maxCount:5,count:1,order:2},mordred:{maxCount:1,count:1,order:3},morgana:{maxCount:1,count:1,order:4},assassin:{maxCount:1,count:0,order:5},oberon:{maxCount:1,count:0,order:6},minion:{maxCount:3,count:0,order:7}},selectedCount:5,assignableList:[]},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=0,r=0;switch(t.type){case u.increment:return a=e.characterList[t.characterName].count,r=e.characterList[t.characterName].maxCount,Object(p.a)({},e,{characterList:Object(p.a)({},e.characterList,Object(l.a)({},t.characterName,Object(p.a)({},e.characterList[t.characterName],{count:r>a?a+1:a}))),selectedCount:r>a?e.selectedCount+1:e.selectedCount});case u.decrement:return a=e.characterList[t.characterName].count,r=e.characterList[t.characterName].maxCount,Object(p.a)({},e,{characterList:Object(p.a)({},e.characterList,Object(l.a)({},t.characterName,Object(p.a)({},e.characterList[t.characterName],{count:a>0?a-1:a}))),selectedCount:a>0?e.selectedCount-1:e.selectedCount});case u.shuffle:var n=[];return Object.keys(e.characterList).forEach(function(t){e.characterList[t].count&&Array(e.characterList[t].count).fill().forEach(function(){n.push(t)})}),Object(p.a)({},e,{assignableList:m(n)});case u.reset:return Object(p.a)({},d);default:return e}},b=a(22),f={add:"PLAYER_ADD",delete:"PLAYER_DELETE",clear:"PLAYER_CLEAR",setRole:"PLAYER_SET_ROLE"},v={playerList:[{name:"Alice",role:null},{name:"Bob",role:null},{name:"Cathy",role:null},{name:"Dickson",role:null},{name:"Evelyn",role:null}]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.add:return Object(p.a)({},e,{playerList:[].concat(Object(b.a)(e.playerList),[{name:t.player,good:null}])});case f.delete:return Object(p.a)({},e,{playerList:e.playerList.slice(t.index,1)});case f.clear:return Object(p.a)({},e,{playerList:[]});case f.setRole:return Object(p.a)({},e,{playerList:e.playerList.map(function(e,a){return Object(p.a)({},e,{role:t.assignableList[a]})})});default:return e}},g={playerSetup:"playerSetup",characters:"characters",assignCharacters:"assignCharacters"},E=["mordred","morgana","oberon","assassin","minion"],L={current:g.assignCharacters},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PAGE":return t.page in g?Object(p.a)({},e,{current:g[t.page]}):e;default:return e}},N=Object(o.b)({characters:h,players:y,page:C}),j=(a(32),a(4)),O=a(5),w=a(7),x=a(6),k=a(8),P={change:"CHANGE_PAGE"},A=(a(33),function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(w.a)(this,Object(x.a)(t).call(this))).handleInputEnter=function(t){"Enter"===t.key&&e.addPlayer(t)},e.addPlayer=function(t){e.input&&e.input.current&&""!==e.input.current.value&&(e.props.dispatch({type:f.add,player:e.input.current.value}),e.input.current.value=""),t.preventDefault()},e.startGame=function(){e.props.dispatch({type:P.change,page:g.characters})},e.clearPlayers=function(){e.props.dispatch({type:f.clear})},e.input=n.a.createRef(),e}return Object(k.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"player-setup"},n.a.createElement("div",{className:"title"},"Please add players"),n.a.createElement("div",null,n.a.createElement("input",{type:"text",ref:this.input,onKeyDown:this.handleInputEnter}),n.a.createElement("button",{className:"btn common add-player",onClick:this.addPlayer},"Add player")),n.a.createElement("div",{className:"name-section"},this.props.playerList.map(function(e,t){var a=e.name;return n.a.createElement("div",{className:"name-item",key:t},"".concat(t+1,". ").concat(a))})),n.a.createElement("div",{className:"button-section"},this.props.playerList.length>0&&n.a.createElement("button",{className:"btn clear",onClick:this.clearPlayers},"Clear"),this.props.playerList.length>=5&&n.a.createElement("button",{className:"btn common start-game",onClick:this.startGame},"Let's Go")),this.props.playerList.length<5&&n.a.createElement("div",{className:"warning"},"You need at least five players"))}}]),t}(n.a.Component)),I=Object(i.b)(function(e){return{playerList:e.players.playerList}})(A),R=a(17),M=a.n(R),S=a(21),G=a(13),T=a.n(G),Y=(a(35),function(e){function t(){var e,a;Object(j.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(w.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(n)))).increaseCharacter=function(e){a.props.dispatch({type:u.increment,characterName:e})},a.decreaseCharacter=function(e){a.props.dispatch({type:u.decrement,characterName:e})},a.resetCharacter=function(){a.props.dispatch({type:u.reset})},a.startGame=Object(S.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.dispatch({type:u.shuffle});case 2:return console.log(a.props.assignableList),e.next=5,a.props.dispatch({type:f.setRole,assignableList:a.props.assignableList});case 5:console.log(a.props.playerList),a.props.dispatch({type:P.change,page:g.assignCharacters});case 7:case"end":return e.stop()}},e)})),a.isGoodEvilBalanced=function(){return Object.keys(a.props.characterList).filter(function(e){return a.props.characterList[e].order>2&&a.props.characterList[e].count>0}).length>0&&Object.keys(a.props.characterList).filter(function(e){return a.props.characterList[e].order<=2&&a.props.characterList[e].count>0}).length>0},a}return Object(k.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"character-setup"},n.a.createElement("div",{className:"character-list"},Object.keys(this.props.characterList).sort(function(t,a){return e.props.characterList[t].order-e.props.characterList[a].order}).map(function(t,a){var r=t.toUpperCase();return n.a.createElement("div",{className:"character-line",key:a},n.a.createElement("div",{className:T()("character-name",{evil:e.props.characterList[t].order>2})},r),n.a.createElement("div",{className:"control-section"},n.a.createElement("button",{className:"btn common minus",disabled:e.props.characterList[t].count<=0,onClick:function(){return e.decreaseCharacter(t)}},"-"),n.a.createElement("div",{className:"count"},e.props.characterList[t].count),n.a.createElement("button",{className:"btn common plus",disabled:e.props.characterList[t].count>=e.props.characterList[t].maxCount||e.props.playerList.length===e.props.selectedCount,onClick:function(){return e.increaseCharacter(t)}},"+")))})),n.a.createElement("div",{className:"message-to-user"},this.props.playerList.length-this.props.selectedCount>0&&n.a.createElement("div",{className:"message-line warning"},n.a.createElement("i",{className:"far fa-hand-point-right"}),n.a.createElement("div",null,"".concat(this.props.playerList.length-this.props.selectedCount," left to be added"))),!this.isGoodEvilBalanced()&&n.a.createElement("div",{className:"message-line warning"},n.a.createElement("i",{className:"far fa-hand-point-right"}),n.a.createElement("div",null,"Must have at least 1 player in each team")),this.props.playerList.length===this.props.selectedCount&&this.isGoodEvilBalanced()&&n.a.createElement("div",{className:"message-line all-set"},n.a.createElement("i",{className:"fas fa-check"}),n.a.createElement("div",null,"All set"))),n.a.createElement("div",{className:"final-button-section"},n.a.createElement("button",{className:"btn clear",onClick:this.resetCharacter},"Reset"),n.a.createElement("button",{className:"btn common",onClick:this.startGame,disabled:this.props.playerList.length>this.props.selectedCount},"Start")))}}]),t}(n.a.Component)),_=Object(i.b)(function(e){return{playerList:e.players.playerList,characterList:e.characters.characterList,selectedCount:e.characters.selectedCount,assignableList:e.characters.assignableList}})(Y),H=(a(36),function(e){function t(e){var r;return Object(j.a)(this,t),(r=Object(w.a)(this,Object(x.a)(t).call(this,e))).onViewClick=function(){var e=[];switch(r.props.playerList[r.state.currentPlayerIndex].role){case"merlin":e=r.props.playerList.filter(function(e){return E.filter(function(e){return"mordred"!==e}).indexOf(e.role)>=0}).map(function(e){return e.name}),r.setState(Object(p.a)({},r.state,{extraInfo:e.length>=2?"People holding evil roles are":1===e.length?"Person holding evil role is":"You can't see anyone",observableNames:e.join(", "),reminder:r.props.playerList.filter(function(e){return"mordred"===e.role}).length>0?"Mordred is hiding!":"",viewMode:"viewing"}));break;case"percival":e=r.props.playerList.filter(function(e){return["morgana","merlin"].indexOf(e.role)>=0}).map(function(e){return e.name}),r.setState(Object(p.a)({},r.state,{extraInfo:e.length>=2?"Possible Merlins are":1===e.length?"Merlin is possibly":"You can't see anyone",observableNames:e.join(", "),reminder:"",viewMode:"viewing"}));break;case"mordred":case"morgana":case"assassin":case"minion":e=r.props.playerList.filter(function(e){return E.indexOf(e.role)>=0}).filter(function(e){return e.name!==r.props.playerList[r.state.currentPlayerIndex].name}).map(function(e){return e.name}),r.setState(Object(p.a)({},r.state,{extraInfo:e.length>=2?"Your teammates are":1===e.length?"Your teammate is":"Your are the only one in your team",observableNames:e.join(", "),reminder:r.props.playerList.filter(function(e){return"oberon"===e.role}).length>0?"Oberon is hiding!":"",viewMode:"viewing"}));break;case"oberon":case"servant":r.setState(Object(p.a)({},r.state,{extraInfo:"",observableNames:"",reminder:"",viewMode:"viewing"}));break;default:return}},r.onConfirmClick=function(){r.state.currentPlayerIndex!==r.props.playerList.length-1&&r.setState(Object(p.a)({},r.state,{currentPlayerIndex:r.state.currentPlayerIndex+1,viewMode:"preview"}))},r.state={currentPlayerIndex:0,viewMode:"preview",extraInfo:"",observableNames:"",reminder:""},r.imageMap={merlin:a(37),percival:a(38),servant:a(39),assassin:a(40),mordred:a(41),morgana:a(42),minion:a(43),oberon:a(44)},r}return Object(k.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"assign-characters"},n.a.createElement("div",{className:"player-name"},this.props.playerList[this.state.currentPlayerIndex].name),"preview"===this.state.viewMode&&n.a.createElement("div",{className:"interaction-block preview-role"},n.a.createElement("div",{className:"message"},"Click the button below to view your role"),n.a.createElement("button",{className:"btn common",onClick:this.onViewClick},"View")),"viewing"===this.state.viewMode&&n.a.createElement("div",{className:"interaction-block viewing"},n.a.createElement("div",{className:"message"},"You are"),n.a.createElement("div",{className:T()("role",{evil:["mordred","morgana","oberon","assassin","minion"].indexOf(this.props.playerList[this.state.currentPlayerIndex].role)>=0})},this.props.playerList[this.state.currentPlayerIndex].role.toUpperCase()),n.a.createElement("img",{src:this.imageMap[this.props.playerList[this.state.currentPlayerIndex].role],alt:this.props.playerList[this.state.currentPlayerIndex].role+"image"}),this.state.extraInfo&&n.a.createElement("div",{className:"extra-info"},this.state.extraInfo),this.state.observableNames&&n.a.createElement("div",{className:"name-list"},this.state.observableNames),this.state.reminder&&n.a.createElement("div",{className:"warning"},n.a.createElement("i",{className:"far fa-hand-point-right"}),n.a.createElement("div",null,this.state.reminder)),n.a.createElement("button",{className:"btn common",onClick:this.onConfirmClick},"Got it")))}}]),t}(n.a.Component)),D=Object(i.b)(function(e){return{playerList:e.players.playerList}})(H),B=(a(45),function(e){function t(){var e,a;Object(j.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(w.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(n)))).backToHome=function(){a.props.dispatch({type:P.change,page:g.playerSetup})},a}return Object(k.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"title-section"},n.a.createElement("div",{className:"title app-title"},"Avalon"),this.props.currentPage!==g.playerSetup&&n.a.createElement("i",{className:"fas fa-home",onClick:this.backToHome})),n.a.createElement("div",{className:"page-content"},this.props.currentPage===g.playerSetup&&n.a.createElement(I,null),this.props.currentPage===g.characters&&n.a.createElement(_,null),this.props.currentPage===g.assignCharacters&&n.a.createElement(D,null)))}}]),t}(n.a.Component)),U=Object(i.b)(function(e){return{count:e.characters.count,currentPage:e.page.current}})(B);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=Object(o.c)(N);c.a.render(n.a.createElement(i.a,{store:V},n.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.5961487e.chunk.js.map